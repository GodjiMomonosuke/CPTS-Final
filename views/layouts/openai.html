<!DOCTYPE html>
<html>
<head>
<title>Chatbot</title>
<style>
  body {
  font-family: 'Arial', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  background-color: #e9e9e9;
  margin: 0;
}

#chat-container {
  background-color: #fff;
  border-radius: 15px;
  padding: 25px;
  box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
  width: 450px;
  max-height: 600px;
  display: flex;
  flex-direction: column;
}

h1 {
  text-align: center;
  color: #333;
  font-weight: 500;
  margin-bottom: 25px;
}

#chat-history {
  flex-grow: 1;
  overflow-y: scroll;
  padding-right: 10px;
  padding-left: 10px;
  border-bottom: 1px solid #ccc;
}

.user-message, .bot-message {
  max-width: 75%;
  padding: 12px;
  border-radius: 12px;
  margin-bottom: 8px;
  animation: fadeIn 0.3s ease-in-out;
}

.user-message {
  background-color: #4CAF50;
  color: white;
  align-self: flex-end;
}

.bot-message {
  background-color: #e0f0e0;
  color: #333;
  align-self: flex-start;
}

form {
  display: flex;
  margin-top: 15px;
}

input {
  flex-grow: 1;
  margin-right: 10px;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 16px;
}

button {
  background-color: #4CAF50;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
}

button:hover {
  background-color: #45a049;
}

#loader {
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

  </style>
</head>
<body>
  <div id="chat-container">
  <h1>Coding Money Chatbot</h1>
  <div id="chat-history"></div>
  <form id="chat-form">
    <input type="text" id="user-input" placeholder="Enter your message">
    <button type="submit">Send</button>
  </form>
</div>
<div id="loader">
  <img src="loader.gif" width="150px" alt="Loading...">
</div>
  <script>
    const chatHistory = document.getElementById('chat-history');
const userInput = document.getElementById('user-input');
const form = document.getElementById('chat-form');
const loader = document.getElementById('loader');

async function sendMessage() {
  const userMessage = userInput.value.trim(); // Trim spaces from user input
  if (!userMessage) {
    alert('Please enter a message!'); // Alert if the input is empty
    return;
  }
  
  userInput.value = ''; // Clear input field
  
  // Add user message to the chat history immediately
  chatHistory.innerHTML += `<div class="user-message">${userMessage}</div>`;
  chatHistory.scrollTop = chatHistory.scrollHeight;

  try {
    loader.style.display = 'block'; // Show loader
    const response = await fetch('/chat', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ userInput: userMessage }),
    });

    const data = await response.json();
    const botMessage = data.response;

    // Add bot message to the chat history
    chatHistory.innerHTML += `<div class="bot-message">${botMessage}</div>`;
    chatHistory.scrollTop = chatHistory.scrollHeight;
  } catch (error) {
    console.error('Error:', error);
    // alert('Sorry, there was an error. Please try again.'); // Error handling
  } finally {
    loader.style.display = 'none'; // Hide loader
  }
}

form.addEventListener('submit', (event) => {
  event.preventDefault(); // Prevent form submission
  sendMessage();
});

  </script>
</body>
</html>